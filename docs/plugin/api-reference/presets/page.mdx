---
title: 프리셋 (presets)
description: 설정 프리셋 저장 및 불러오기 API
---

# 프리셋 (presets)

## 프리셋 목록

### list()

저장된 프리셋 목록을 조회합니다.

```javascript
const presets = await dmn.presets.list();
// ["default", "gaming", "streaming", ...]
```

## 프리셋 관리

### save(name, options?)

현재 설정을 프리셋으로 저장합니다.

```javascript
// 전체 설정 저장
await dmn.presets.save("myPreset");

// 특정 카테고리만 저장
await dmn.presets.save("keyLayout", {
  include: ["keys", "positions"],
});
```

### load(name)

프리셋을 불러와 설정에 적용합니다.

```javascript
await dmn.presets.load("gaming");
```

### remove(name)

프리셋을 삭제합니다.

```javascript
await dmn.presets.remove("oldPreset");
```

### get(name)

프리셋 내용을 조회합니다 (적용하지 않음).

```javascript
const preset = await dmn.presets.get("gaming");
console.log("게이밍 프리셋 설정:", preset);
```

### rename(oldName, newName)

프리셋 이름을 변경합니다.

```javascript
await dmn.presets.rename("myPreset", "myBetterPreset");
```

## 이벤트 구독

### onChanged(listener)

프리셋 목록 변경 이벤트를 구독합니다.

```javascript
const unsub = dmn.presets.onChanged((presets) => {
  console.log("프리셋 목록:", presets);
});
```

### onLoaded(listener)

프리셋 로드 이벤트를 구독합니다.

```javascript
const unsub = dmn.presets.onLoaded((name) => {
  console.log(`프리셋 '${name}' 로드됨`);
});
```

## 사용 예제

### 프리셋 선택기

```javascript
defineElement("presetSelector", {
  template({ state }) {
    return htm`
      <select 
        value=${state.current}
        onChange=${(e) => dmn.presets.load(e.target.value)}
      >
        ${state.presets.map(
          (p) => htm`
          <option value=${p}>${p}</option>
        `
        )}
      </select>
    `;
  },

  async setup({ state }) {
    state.presets = await dmn.presets.list();
    state.current = "";

    const unsub = dmn.presets.onLoaded((name) => {
      state.current = name;
    });

    registerCleanup(unsub);
  },
});
```

### 퀵 세이브/로드

```javascript
// 컨텍스트 메뉴에 퀵 슬롯 추가
dmn.ui.contextMenu.register({
  label: "프리셋",
  children: [
    {
      label: "슬롯 1 저장",
      action: () => dmn.presets.save("quickSlot1"),
    },
    {
      label: "슬롯 1 불러오기",
      action: () => dmn.presets.load("quickSlot1"),
    },
    { separator: true },
    {
      label: "슬롯 2 저장",
      action: () => dmn.presets.save("quickSlot2"),
    },
    {
      label: "슬롯 2 불러오기",
      action: () => dmn.presets.load("quickSlot2"),
    },
  ],
});
```

### 조건부 프리셋 자동 로드

```javascript
// 시간대에 따른 프리셋 자동 적용
async function autoLoadPreset() {
  const hour = new Date().getHours();

  if (hour >= 22 || hour < 6) {
    await dmn.presets.load("nightMode");
  } else if (hour >= 6 && hour < 12) {
    await dmn.presets.load("morning");
  } else {
    await dmn.presets.load("default");
  }
}

// 앱 시작 시 실행
dmn.app.bootstrap(autoLoadPreset);
```

## 프리셋에 포함되는 항목

| 카테고리    | 설명                |
| ----------- | ------------------- |
| `settings`  | 모든 앱 설정        |
| `keys`      | 키 레이아웃 및 설정 |
| `positions` | 키 위치 정보        |
| `overlay`   | 오버레이 위치/크기  |

<Callout type="info">
  플러그인 설정(`dmn.plugin.storage`)은 프리셋에 포함되지 않습니다. 플러그인
  데이터를 포함하려면 별도로 관리하세요.
</Callout>
